<!-- saved from url=(0014)about:internet -->
<pre class="code">
<span class="srcline"><span class="lineno"><a href="99,1" id="srcline1"> 1</a></span><span class="line"><span class="keyword">function</span> [<span class="var type1" id="S2T24U3">PointLast</span>,<span class="var type1" id="S3T7U4">PL_Cnt</span>,<span class="var type1" id="S4T7U5">f_error</span>] = Calculate_Map_Points(<span class="var type1" id="S5T13U8">Point</span>,<span class="var type1" id="S6T7U9">P_Cnt</span>,<span class="var type1" id="S7T7U10">L</span>,<span class="var type1" id="S8T7U11">flag</span>,<span class="var type1" id="S9T7U12">Theita</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="99,2" id="srcline2"> 2</a></span><span class="line"><span class="comment"><span class="comment">%{</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="99,3" id="srcline3"> 3</a></span><span class="line"><span class="comment">作用：对多边形进行整体内缩或外扩</span></span></span>
<span class="srcline"><span class="lineno"><a href="99,4" id="srcline4"> 4</a></span><span class="line"><span class="comment">输入：</span></span></span>
<span class="srcline"><span class="lineno"><a href="99,5" id="srcline5"> 5</a></span><span class="line"><span class="comment">P_Cnt:为点集点的个数(数据类型：double 1x1)</span></span></span>
<span class="srcline"><span class="lineno"><a href="99,6" id="srcline6"> 6</a></span><span class="line"><span class="comment">Point:为初始点坐标集(数据类型：double P_Cntx1)</span></span></span>
<span class="srcline"><span class="lineno"><a href="99,7" id="srcline7"> 7</a></span><span class="line"><span class="comment">L:为缩放的宽度(数据类型：double 1x1)</span></span></span>
<span class="srcline"><span class="lineno"><a href="99,8" id="srcline8"> 8</a></span><span class="line"><span class="comment">flag: = 0缩小，flag = 1,扩大(数据类型：double 1x1)</span></span></span>
<span class="srcline"><span class="lineno"><a href="99,9" id="srcline9"> 9</a></span><span class="line"><span class="comment">Theita:为小角度的上限(数据类型：double 1x1)</span></span></span>
<span class="srcline"><span class="lineno"><a href="99,10" id="srcline10">10</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="99,11" id="srcline11">11</a></span><span class="line"><span class="comment">输出：</span></span></span>
<span class="srcline"><span class="lineno"><a href="99,12" id="srcline12">12</a></span><span class="line"><span class="comment">PL_Cnt:输出点集点的个数(数据类型：double 1x1)</span></span></span>
<span class="srcline"><span class="lineno"><a href="99,13" id="srcline13">13</a></span><span class="line"><span class="comment">PointLast：处理后的点集(数据类型：double PL_Cntx1)</span></span></span>
<span class="srcline"><span class="lineno"><a href="99,14" id="srcline14">14</a></span><span class="line"><span class="comment">f_error：0：正常；1：出现错误(数据类型：double 1x1)</span></span></span>
<span class="srcline"><span class="lineno"><a href="99,15" id="srcline15">15</a></span><span class="line"><span class="comment"><span class="comment">%}</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="99,16" id="srcline16">16</a></span><span class="line"><span class="mxinfo " id="T7:U9"><span class="var type1" id="S10T7U15">n</span> = <span class="mxinfo " id="T7:U11">zeros(1,1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="99,17" id="srcline17">17</a></span><span class="line"><span class="mxinfo " id="T7:U12"><span class="var type1" id="S10T7U23">n</span>(1,1) = <span class="var type1" id="S6T7U26">P_Cnt</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="99,18" id="srcline18">18</a></span><span class="line"><span class="mxinfo " id="T62:U15"><span class="var type1" id="S12T62U29">Sina</span> = <span class="mxinfo " id="T62:U17">zeros(<span class="mxinfo " id="T7:U18">1</span>,<span class="var type1" id="S10T7U34">n</span>(1,1))</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="99,19" id="srcline19">19</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="99,20" id="srcline20">20</a></span><span class="line"><span class="mxinfo " id="T40:U20"><span class="var type1" id="S13T40U39">NEdgevectorList</span> = <span class="mxinfo " id="T40:U22">zeros(<span class="var type1" id="S10T7U43">n</span>(1,1),<span class="mxinfo " id="T7:U24">2</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="99,21" id="srcline21">21</a></span><span class="line"><span class="mxinfo " id="T40:U25"><span class="mxinfo " id="T40:U26"><span class="var type1" id="S13T40U50">NEdgevectorList</span>(<span class="mxinfo " id="T54:U28"><span class="mxinfo " id="T7:U29">1</span>:<span class="var type1" id="S10T7U54">n</span>(1,1)</span>,<span class="mxinfo " id="T21:U31">1:2</span>)</span> = <span class="mxinfo " id="T40:U32"><span class="fcn" id="F82N13:B61">DPList</span>(<span class="mxinfo " id="T13:U33"><span class="var type1" id="S5T13U63">Point</span>(<span class="mxinfo " id="T15:U35"><span class="mxinfo " id="T7:U36">1</span>:<span class="var type1" id="S10T7U67">n</span>(1,1)</span>,<span class="mxinfo " id="T21:U38">1:2</span>)</span>,<span class="var type1" id="S10T7U74">n</span>(1,1))</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="99,22" id="srcline22">22</a></span><span class="line"><span class="mxinfo " id="T40:U40"><span class="mxinfo " id="T40:U41"><span class="var type1" id="S13T40U80">NEdgevectorList</span>(<span class="mxinfo " id="T54:U43"><span class="mxinfo " id="T7:U44">1</span>:<span class="var type1" id="S10T7U84">n</span>(1,1)</span>,<span class="mxinfo " id="T21:U46">1:2</span>)</span> = <span class="mxinfo " id="T40:U47"><span class="fcn" id="F94N16:B91">NormalizeDPList</span>(<span class="mxinfo " id="T40:U48"><span class="var type1" id="S13T40U93">NEdgevectorList</span>(<span class="mxinfo " id="T54:U50"><span class="mxinfo " id="T7:U51">1</span>:<span class="var type1" id="S10T7U97">n</span>(1,1)</span>,<span class="mxinfo " id="T21:U53">1:2</span>)</span>,<span class="var type1" id="S10T7U104">n</span>(1,1))</span></span>;<span class="comment">%单位向量</span></span></span>
<span class="srcline"><span class="lineno"><a href="99,23" id="srcline23">23</a></span><span class="line"><span class="mxinfo " id="T62:U55"><span class="mxinfo " id="T62:U56"><span class="var type1" id="S12T62U110">Sina</span>(<span class="mxinfo " id="T12:U58">1</span>,<span class="mxinfo " id="T54:U59"><span class="mxinfo " id="T7:U60">1</span>:<span class="var type1" id="S10T7U115">n</span>(1,1)</span>)</span> = <span class="mxinfo " id="T62:U62"><span class="fcn" id="F132N7:B119">CalculateSina</span>(<span class="mxinfo " id="T40:U63"><span class="var type1" id="S13T40U121">NEdgevectorList</span>(<span class="mxinfo " id="T54:U65"><span class="mxinfo " id="T7:U66">1</span>:<span class="var type1" id="S10T7U125">n</span>(1,1)</span>,<span class="mxinfo " id="T21:U68">1:2</span>)</span>,<span class="var type1" id="S10T7U132">n</span>(1,1))</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="99,24" id="srcline24">24</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="99,25" id="srcline25">25</a></span><span class="line"><span class="mxinfo " id="T24:U70"><span class="var type1" id="S17T24U137">P</span> = <span class="mxinfo " id="T24:U72">zeros(<span class="mxinfo " id="T7:U73">100</span>,<span class="mxinfo " id="T7:U74">2</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="99,26" id="srcline26">26</a></span><span class="line"><span class="mxinfo " id="T7:U75"><span class="var type1" id="S18T7U144">PP_Cnt</span> = <span class="mxinfo " id="T7:U77">zeros(1,1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="99,27" id="srcline27">27</a></span><span class="line"><span class="mxinfo " id="T24:U78"><span class="var type1" id="S2T24U151">PointLast</span> = <span class="mxinfo " id="T24:U80">zeros(<span class="mxinfo " id="T7:U81">100</span>,<span class="mxinfo " id="T7:U82">2</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="99,28" id="srcline28">28</a></span><span class="line"><span class="mxinfo " id="T7:U83"><span class="var type1" id="S3T7U158">PL_Cnt</span> = <span class="mxinfo " id="T7:U85">zeros(1,1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="99,29" id="srcline29">29</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="99,30" id="srcline30">30</a></span><span class="line"><span class="mxinfo " id="T7:U86"><span class="var type1" id="S4T7U165">f_error</span> = <span class="mxinfo " id="T7:U88">zeros(1,1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="99,31" id="srcline31">31</a></span><span class="line"><span class="comment">%%</span></span></span>
<span class="srcline"><span class="lineno"><a href="99,32" id="srcline32">32</a></span><span class="line"><span class="keyword">switch</span> <span class="var type1" id="S8T7U171">flag</span> <span class="comment">%flag: = 0缩小，flag = 1,扩大</span></span></span>
<span class="srcline"><span class="lineno"><a href="99,33" id="srcline33">33</a></span><span class="line">    <span class="keyword">case</span> <span class="mxinfo " id="T94:U90">0</span></span></span>
<span class="srcline"><span class="lineno"><a href="99,34" id="srcline34">34</a></span><span class="line">        <span class="keyword">for</span> <span class="var type1" id="S19T7U176">i</span> = <span class="mxinfo " id="T7:U92">2</span>:<span class="var type1" id="S10T7U180">n</span>(1,1)</span></span>
<span class="srcline"><span class="lineno"><a href="99,35" id="srcline35">35</a></span><span class="line">             <span class="mxinfo " id="T22:U94"><span class="mxinfo " id="T22:U95"><span class="var type1" id="S17T24U186">P</span>(<span class="var type1" id="S19T7U187">i</span>,<span class="mxinfo " id="T22:U98"><span class="mxinfo " id="T7:U99">1</span>:<span class="mxinfo " id="T7:U100">2</span></span>)</span> = <span class="mxinfo " id="T22:U101"><span class="mxinfo " id="T22:U102"><span class="var type1" id="S5T13U193">Point</span>(<span class="var type1" id="S19T7U194">i</span>,<span class="mxinfo " id="T22:U105"><span class="mxinfo " id="T7:U106">1</span>:<span class="mxinfo " id="T7:U107">2</span></span>)</span> + <span class="mxinfo " id="T22:U108"><span class="mxinfo " id="T22:U109">(<span class="mxinfo " id="T22:U110"><span class="mxinfo " id="T22:U111"><span class="var type1" id="S13T40U203">NEdgevectorList</span>(<span class="var type1" id="S19T7U204">i</span>,<span class="mxinfo " id="T21:U114">1:2</span>)</span> - <span class="mxinfo " id="T22:U115"><span class="var type1" id="S13T40U209">NEdgevectorList</span>(<span class="mxinfo " id="T7:U117"><span class="var type1" id="S19T7U211">i</span>-<span class="mxinfo " id="T7:U119">1</span></span>,<span class="mxinfo " id="T22:U120"><span class="mxinfo " id="T7:U121">1</span>:<span class="mxinfo " id="T7:U122">2</span></span>)</span></span>) * <span class="var type1" id="S7T7U216">L</span></span> / <span class="mxinfo " id="T7:U124"><span class="var type1" id="S12T62U218">Sina</span>(<span class="mxinfo " id="T12:U126">1</span>,<span class="var type1" id="S19T7U220">i</span>)</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="99,36" id="srcline36">36</a></span><span class="line">        <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="99,37" id="srcline37">37</a></span><span class="line">         <span class="mxinfo " id="T22:U128"><span class="mxinfo " id="T22:U129"><span class="var type1" id="S17T24U224">P</span>(<span class="mxinfo " id="T12:U131">1</span>,<span class="mxinfo " id="T21:U132">1:2</span>)</span> = <span class="mxinfo " id="T22:U133"><span class="mxinfo " id="T22:U134"><span class="var type1" id="S5T13U231">Point</span>(<span class="mxinfo " id="T7:U136">1</span>,<span class="mxinfo " id="T22:U137"><span class="mxinfo " id="T7:U138">1</span>:<span class="mxinfo " id="T7:U139">2</span></span>)</span> + <span class="mxinfo " id="T22:U140"><span class="mxinfo " id="T22:U141">(<span class="mxinfo " id="T22:U142"><span class="mxinfo " id="T22:U143"><span class="var type1" id="S13T40U241">NEdgevectorList</span>(<span class="mxinfo " id="T7:U145">1</span>,<span class="mxinfo " id="T21:U146">1:2</span>)</span> - <span class="mxinfo " id="T22:U147"><span class="var type1" id="S13T40U247">NEdgevectorList</span>(<span class="mxinfo " id="T7:U149"><span class="var type1" id="S10T7U249">n</span>(1,1)</span>,<span class="mxinfo " id="T22:U151"><span class="mxinfo " id="T7:U152">1</span>:<span class="mxinfo " id="T7:U153">2</span></span>)</span></span>) * <span class="var type1" id="S7T7U255">L</span></span> / <span class="mxinfo " id="T7:U155"><span class="var type1" id="S12T62U257">Sina</span>(<span class="mxinfo " id="T12:U157">1</span>,<span class="mxinfo " id="T7:U158">1</span>)</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="99,38" id="srcline38">38</a></span><span class="line">         </span></span>
<span class="srcline"><span class="lineno"><a href="99,39" id="srcline39">39</a></span><span class="line">         <span class="mxinfo " id="T23:U159"><span class="var type1" id="S20T23U262">Prep</span> = <span class="mxinfo " id="T23:U161"><span class="fcn" id="F95N17:B264">Preprocess</span>(<span class="mxinfo " id="T25:U162"><span class="var type1" id="S17T24U266">P</span>(<span class="mxinfo " id="T17:U164"><span class="mxinfo " id="T7:U165">1</span>:<span class="var type1" id="S10T7U270">n</span>(1,1)</span>,<span class="mxinfo " id="T21:U167">1:2</span>)</span>,<span class="var type1" id="S10T7U277">n</span>(1,1))</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="99,40" id="srcline40">40</a></span><span class="line">         <span class="mxinfo " id="T24:U169"><span class="mxinfo " id="T24:U170"><span class="var type1" id="S17T24U283">P</span>(<span class="mxinfo " id="T5:U172"><span class="mxinfo " id="T7:U173">1</span>:<span class="mxinfo " id="T7:U174">100</span></span>,<span class="mxinfo " id="T22:U175"><span class="mxinfo " id="T7:U176">1</span>:<span class="mxinfo " id="T7:U177">2</span></span>)</span> = <span class="mxinfo " id="T24:U178">zeros(<span class="mxinfo " id="T7:U179">100</span>,<span class="mxinfo " id="T7:U180">2</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="99,41" id="srcline41">41</a></span><span class="line">         <span class="mxinfo " id="T24:U181"><span class="mxinfo " id="T24:U182"><span class="var type1" id="S17T24U297">P</span>(<span class="mxinfo " id="T92:U184">1:100</span>,<span class="mxinfo " id="T21:U185">1:2</span>)</span> = <span class="mxinfo " id="T24:U186"><span class="mxinfo " id="T24:U187"><span class="var type1" id="S20T23U306">Prep</span>.Preprocessing</span>(<span class="mxinfo " id="T5:U189"><span class="mxinfo " id="T7:U190">1</span>:<span class="mxinfo " id="T7:U191">100</span></span>,<span class="mxinfo " id="T22:U192"><span class="mxinfo " id="T7:U193">1</span>:<span class="mxinfo " id="T7:U194">2</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="99,42" id="srcline42">42</a></span><span class="line">         <span class="mxinfo " id="T7:U195"><span class="var type1" id="S18T7U317">PP_Cnt</span>(1,1) = <span class="mxinfo " id="T7:U197"><span class="var type1" id="S20T23U322">Prep</span>.Cnt</span>(1,1)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="99,43" id="srcline43">43</a></span><span class="line">         [<span class="mxinfo " id="T24:U199"><span class="var type1" id="S2T24U330">PointLast</span>(<span class="mxinfo " id="T5:U201"><span class="mxinfo " id="T7:U202">1</span>:<span class="mxinfo " id="T7:U203">100</span></span>,<span class="mxinfo " id="T22:U204"><span class="mxinfo " id="T7:U205">1</span>:<span class="mxinfo " id="T7:U206">2</span></span>)</span>,<span class="mxinfo " id="T7:U207"><span class="var type1" id="S3T7U338">PL_Cnt</span>(1,1)</span>] = <span class="fcn" id="F276N9:B342">Calculate_Effective_Point</span>(<span class="mxinfo " id="T25:U209"><span class="var type1" id="S17T24U344">P</span>(<span class="mxinfo " id="T17:U211"><span class="mxinfo " id="T7:U212">1</span>:<span class="var type1" id="S18T7U348">PP_Cnt</span>(1,1)</span>,<span class="mxinfo " id="T21:U214">1:2</span>)</span>,<span class="var type1" id="S18T7U355">PP_Cnt</span>(1,1));</span></span>
<span class="srcline"><span class="lineno"><a href="99,44" id="srcline44">44</a></span><span class="line">    <span class="keyword">case</span> <span class="mxinfo " id="T94:U216">1</span></span></span>
<span class="srcline"><span class="lineno"><a href="99,45" id="srcline45">45</a></span><span class="line">        [<span class="mxinfo " id="T24:U217"><span class="var type1" id="S2T24U364">PointLast</span>(<span class="mxinfo " id="T5:U219"><span class="mxinfo " id="T7:U220">1</span>:<span class="mxinfo " id="T7:U221">100</span></span>,<span class="mxinfo " id="T22:U222"><span class="mxinfo " id="T7:U223">1</span>:<span class="mxinfo " id="T7:U224">2</span></span>)</span>,<span class="mxinfo " id="T7:U225"><span class="var type1" id="S3T7U372">PL_Cnt</span>(1,1)</span>]  = <span class="fcn" id="F283N6:B376">CalculateNewPoint</span>(<span class="mxinfo " id="T13:U227"><span class="var type1" id="S5T13U378">Point</span>(<span class="mxinfo " id="T15:U229"><span class="mxinfo " id="T7:U230">1</span>:<span class="var type1" id="S6T7U381">P_Cnt</span></span>,<span class="mxinfo " id="T21:U232">1:2</span>)</span>,<span class="var type1" id="S6T7U385">P_Cnt</span>,<span class="var type1" id="S7T7U386">L</span>,<span class="var type1" id="S9T7U387">Theita</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="99,46" id="srcline46">46</a></span><span class="line">    <span class="keyword">otherwise</span></span></span>
<span class="srcline"><span class="lineno"><a href="99,47" id="srcline47">47</a></span><span class="line">        <span class="mxinfo " id="T7:U236"><span class="var type1" id="S4T7U392">f_error</span>(1,1) = <span class="mxinfo " id="T7:U238">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="99,48" id="srcline48">48</a></span><span class="line"><span class="keyword"><span class="keyword">end</span></span></span></span>
</pre>
